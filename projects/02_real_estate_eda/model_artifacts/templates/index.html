
<!DOCTYPE html>
<html>
<head>
    <title>–ü—Ä–µ–¥—Å–∫–∞–∑–∞—Ç–µ–ª—å —Ü–µ–Ω –Ω–∞ –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç—å</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 600px; margin: 40px auto; padding: 20px; }
        .form-group { margin: 15px 0; }
        label { display: block; margin: 5px 0; }
        input, select { width: 100%; padding: 8px; margin: 5px 0; border: 1px solid #ddd; border-radius: 4px; }
        button { background: #007cba; color: white; padding: 12px 24px; border: none; border-radius: 4px; cursor: pointer; font-size: 16px; }
        button:hover { background: #005a87; }
        button:disabled { background: #ccc; cursor: not-allowed; }
        .result { margin: 20px 0; padding: 20px; background: #f0f8ff; border-radius: 8px; border-left: 4px solid #007cba; }
        .error { background: #ffe6e6; border-left-color: #ff4444; }
        .loading { color: #666; font-style: italic; }
        .success { color: #2ecc71; font-weight: bold; font-size: 24px; }
    </style>
</head>
<body>
    <h1>üè† –ü—Ä–µ–¥—Å–∫–∞–∑–∞—Ç–µ–ª—å —Ü–µ–Ω –Ω–∞ –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç—å –ú–æ—Å–∫–≤—ã</h1>
    <p>ML –º–æ–¥–µ–ª—å —Å —Ç–æ—á–Ω–æ—Å—Ç—å—é 87.1% (R¬≤ = 0.871)</p>

    <form id="predictionForm">
        <div class="form-group">
            <label>–ü–ª–æ—â–∞–¥—å (–º¬≤):</label>
            <input type="number" name="area" value="60" min="10" max="500" required>
        </div>
        <div class="form-group">
            <label>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–æ–º–Ω–∞—Ç:</label>
            <input type="number" name="rooms" value="2" min="1" max="10" required>
        </div>
        <div class="form-group">
            <label>–ú–∏–Ω—É—Ç –¥–æ –º–µ—Ç—Ä–æ:</label>
            <input type="number" name="minutes_to_metro" value="10" min="0" max="60" required>
        </div>
        <div class="form-group">
            <label>–≠—Ç–∞–∂:</label>
            <input type="number" name="floor" value="5" min="1" max="50" required>
        </div>
        <div class="form-group">
            <label>–í—Å–µ–≥–æ —ç—Ç–∞–∂–µ–π –≤ –¥–æ–º–µ:</label>
            <input type="number" name="total_floors" value="16" min="1" max="100" required>
        </div>
        <div class="form-group">
            <label>–°—Ç–∞–Ω—Ü–∏—è –º–µ—Ç—Ä–æ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):</label>
            <input type="text" name="metro_station" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –ö—Ä–∞—Å–Ω–æ–≥–≤–∞—Ä–¥–µ–π—Å–∫–∞—è, –õ—É–∂–Ω–∏–∫–∏">
            <small>–û—Å—Ç–∞–≤—å—Ç–µ –ø—É—Å—Ç—ã–º –¥–ª—è —Å—Ä–µ–¥–Ω–µ–π —Ü–µ–Ω—ã –ø–æ —Ä—ã–Ω–∫—É</small>
        </div>
        <button type="submit" id="submitBtn">üéØ –ü—Ä–µ–¥—Å–∫–∞–∑–∞—Ç—å —Ü–µ–Ω—É</button>
    </form>

    <div id="result" class="result" style="display:none;">
        <h3 id="resultTitle"></h3>
        <p id="resultDetails"></p>
    </div>

    <script>
        document.getElementById('predictionForm').addEventListener('submit', async function(e) {
            e.preventDefault();

            const submitBtn = document.getElementById('submitBtn');
            const resultDiv = document.getElementById('result');
            const resultTitle = document.getElementById('resultTitle');
            const resultDetails = document.getElementById('resultDetails');

            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∑–∞–≥—Ä—É–∑–∫—É
            submitBtn.disabled = true;
            submitBtn.textContent = '‚è≥ –í—ã—á–∏—Å–ª—è–µ–º...';
            resultDiv.style.display = 'block';
            resultDiv.className = 'result';
            resultTitle.innerHTML = '‚è≥ –ó–∞–≥—Ä—É–∂–∞–µ–º –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ...';
            resultDetails.textContent = '';

            try {
                const formData = new FormData(this);
                const data = Object.fromEntries(formData);

                // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∑–∞–ø—Ä–æ—Å –∫ –Ω–∞—à–µ–º—É API
                const response = await fetch('http://localhost:5000/predict', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(data)
                });

                const result = await response.json();

                if (result.success) {
                    const price = result.predicted_price;
                    resultTitle.innerHTML = `<span class="success">üéØ –ü—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–Ω–∞—è —Ü–µ–Ω–∞: ${formatPrice(price)}</span>`;
                    resultDetails.innerHTML = `
                        <strong>–î–µ—Ç–∞–ª–∏:</strong><br>
                        ‚Ä¢ –ü–ª–æ—â–∞–¥—å: ${data.area} –º¬≤<br>
                        ‚Ä¢ –ö–æ–º–Ω–∞—Ç: ${data.rooms}<br>
                        ‚Ä¢ –î–æ –º–µ—Ç—Ä–æ: ${data.minutes_to_metro} –º–∏–Ω<br>
                        ‚Ä¢ –≠—Ç–∞–∂: ${data.floor} –∏–∑ ${data.total_floors}<br>
                        ${data.metro_station ? `‚Ä¢ –°—Ç–∞–Ω—Ü–∏—è –º–µ—Ç—Ä–æ: ${data.metro_station}` : ''}<br><br>
                        <em>–¢–æ—á–Ω–æ—Å—Ç—å –º–æ–¥–µ–ª–∏: 87.1% (R¬≤ = 0.871)<br>
                        –°—Ä–µ–¥–Ω—è—è –æ—à–∏–±–∫–∞: ¬±7 –º–ª–Ω —Ä—É–±</em>
                    `;
                } else {
                    throw new Error(result.error);
                }

            } catch (error) {
                resultDiv.className = 'result error';
                resultTitle.textContent = '–û—à–∏–±–∫–∞';
                resultDetails.textContent = `–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ: ${error.message}. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ Flask —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω –Ω–∞ localhost:5000`;
            } finally {
                submitBtn.disabled = false;
                submitBtn.textContent = 'üéØ –ü—Ä–µ–¥—Å–∫–∞–∑–∞—Ç—å —Ü–µ–Ω—É';
            }
        });

        function formatPrice(price) {
            if (price >= 1000000) {
                return (price / 1000000).toLocaleString('ru-RU', {maximumFractionDigits: 1}) + ' –º–ª–Ω —Ä—É–±';
            } else {
                return price.toLocaleString('ru-RU') + ' —Ä—É–±';
            }
        }
    </script>
</body>
</html>
